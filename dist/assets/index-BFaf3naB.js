(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();var p={};document.addEventListener("DOMContentLoaded",function(){document.getElementById("waiverForm").addEventListener("submit",function(o){o.preventDefault();let n=!0;if(this.querySelectorAll("input[required]").forEach(e=>{e.value?e.classList.remove("error"):(n=!1,e.classList.add("error"))}),document.getElementById("ageConfirmation").checked||(n=!1,document.getElementById("ageConfirmation").classList.add("error")),n){const e=new FormData(this),i=document.getElementById("signature-pad").toDataURL();e.append("signature",i);const l="patrSDFSibHMsW2UA.d69bf3095fbf33d82d6d07ea31c0762357534f61b06dbce42ea224f28e3ff859",u="appNuegQuklxOYfDE",f="GolfCartWeaver",m="re_55Lc6qRz_KLb1HqJy3GhNTm7fWXbff2PS";fetch(`https://api.airtable.com/v0/${u}/${f}`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({fields:{form_id:e.get("form_id"),guest_name:e.get("guest_name"),guest_email:e.get("guest_email"),guest_phone:e.get("guest_phone"),signature_date:e.get("signature_date"),signature:e.get("signature")}})}).then(s=>s.json()).then(s=>{const d=s.pdf_link;c(d),console.log(s),alert("Form submitted successfully!"),this.reset();const g="https://api.resend.com/v1/send",h={to:e.get("guest_email"),subject:"Formulario de waiver",body:`Se ha enviado el formulario de waiver. Puede descargar el PDF en el siguiente enlace: ${d}`};fetch(g,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify(h)}).then(a=>a.json()).then(a=>console.log("Email enviado correctamente")).catch(a=>console.error("Error al enviar email:",a))}).catch(s=>console.error("Error:",s))}else alert("Please fill in all required fields.")});function c(o){const n=p.RESEND_API_KEY;fetch("https://api.resend.com/send",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({to:"conradovilla@hotmail.com",subject:"Golf Cart Waiver",body:`Attached is the signed waiver.
Link to PDF: `+o})}).then(r=>r.json()).then(r=>console.log("Email sent:",r)).catch(r=>console.error("Error sending email:",r))}});
